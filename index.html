<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="content-language" content="it" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Battesimo di Agostino — 13 Settembre 2025</title>
  <meta name="description" content="Invito al Battesimo di Agostino — conferma la tua presenza">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f7f8fb; --ink:#1f2937; --muted:#6b7280;
      --brand:#6f8fb9; --ring:rgba(111,143,185,.3);
      --card:#ffffff; --radius:18px; --shadow:0 12px 30px rgba(17,24,39,.08);
      /* Height for mobile sticky CTA */
      --sticky-height: 92px;
    }
    *{box-sizing:border-box}
    html,body{min-height:100%; height:auto}
    body{margin:0; color:var(--ink); background:var(--bg); font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial; -webkit-overflow-scrolling:touch; overflow:auto}
    .wrap{max-width:1000px; margin:0 auto; padding:clamp(16px,3vw,24px)}
    .hero{
      display:grid; gap:28px; align-items:center;
      grid-template-columns: 1.1fr .9fr;
      background: radial-gradient(1000px 500px at 120% -20%, #eaf0fb, transparent);
      border-radius: var(--radius); padding:32px; box-shadow: var(--shadow);
    }
    .title{font-family:"Playfair Display",serif; font-size:clamp(28px,4vw,44px); line-height:1.1; margin:0 0 8px}
    .subtitle{color:var(--muted); margin:0 0 16px}
    .meta{display:flex; gap:18px; flex-wrap:wrap; margin:16px 0 28px}
    .pill{background:#fff; border:1px solid #e5e7eb; padding:10px 14px; border-radius:999px; font-weight:600}
    .cta{display:inline-block; background:var(--brand); color:#fff; text-decoration:none; font-weight:700;
         padding:14px 18px; border-radius:12px; box-shadow:0 8px 18px rgba(111,143,185,.35)}
    .cta:focus{outline:3px solid var(--ring)}
    .photo{
      aspect-ratio: 4/5; width:100%; border-radius:16px; overflow:hidden; border:1px solid #e5e7eb; background:#fff;
    }
    .photo img{width:100%; height:100%; object-fit:cover}
    .note{color:var(--muted); font-size:14px; margin-top:12px}
    .section{max-width:1200px; margin:0 auto; text-align:center}
    .section h2{font-family:"Playfair Display",serif; font-size:clamp(20px,2.8vw,28px); margin:0 0 8px}
    .embed{margin-top:18px}
    /* Canva embed viewport */
    .canva-embed-box{position:relative; width:100vw; height:100dvh; padding-top:0; overflow:hidden; border-radius:0; box-shadow:none; background:#000;
      margin-left:calc(50% - 50vw); margin-right:calc(50% - 50vw)}
    .canva-embed-box iframe{position:absolute; width:100%; height:100%; top:0; left:0; border:0}
    /* On phones, leave room for the sticky CTA and allow page scroll */
    @media (max-width:768px){
      .canva-embed-box{height:calc(100dvh - var(--sticky-height))}
    }
    /* Canva: stage + frame for overlay CTA */
    .canva-stage{position:relative}
    /* Phone-like canvas: fixed 9:16 artboard, centered and responsive */
    .canva-frame{
      position:relative; width:clamp(320px, 90vw, 560px); aspect-ratio: 9 / 16;
      margin:0 auto; border:0; border-radius:8px; overflow:hidden; background:#4E7166; box-shadow: var(--shadow);
    }
    .canva-frame video{position:absolute; inset:0; width:100%; height:100%; object-fit:contain; object-position:center; background:#4E7166 !important; display:block}
    .canva-frame img{position:absolute; inset:0; width:100%; height:100%; object-fit:contain; object-position:center; display:block}
    .canva-frame .canva-embed{position:absolute; inset:0; width:100%; height:100%; border:0; display:none}
    .canva-frame.is-embed .poster{display:none}
    .canva-frame.is-embed .canva-embed{display:block}
    .is-hidden{opacity:0; visibility:hidden}
    @keyframes pulse-cta{0%{transform:scale(1)}50%{transform:scale(1.04)}100%{transform:scale(1)}}
    .canva-overlay-cta{position:absolute; left:50%; right:auto; transform:translateX(-50%); bottom:max(14px, env(safe-area-inset-bottom) + 12px); z-index:100; background:var(--brand); color:#fff; border:0; border-radius:999px; padding:clamp(12px,3.8vw,16px) clamp(18px,4.6vw,26px); font-weight:900; font-size:clamp(15px,4vw,20px); box-shadow:0 12px 26px rgba(17,24,39,.28); cursor:pointer; max-width:calc(100vw - env(safe-area-inset-left) - env(safe-area-inset-right) - 28px); white-space:normal; text-align:center; animation:pulse-cta 1.8s ease-in-out infinite}
    .canva-overlay-cta:focus{outline:3px solid var(--ring)}
    @media (max-width:768px){
      body{overflow:auto}
      .wrap{padding:0}
      .section{max-width:none}
    }
    
    /* Address overlay anchored to the artboard bottom-right with bumper */
    .address{position:absolute; right:max(14px, env(safe-area-inset-right) + 12px); bottom:max(14px, env(safe-area-inset-bottom) + 12px); left:auto; top:auto; transform:none; z-index:100; color:#fff; background:rgba(17,24,39,.45); backdrop-filter: blur(4px); padding:8px 12px; border-radius:10px; max-width:min(92vw, 420px); overflow-wrap:anywhere}
    .address a{color:#fff; font-weight:700; text-decoration:none}
    .address a:hover{text-decoration:underline}
    /* Modal RSVP */
    .modal-backdrop{position:fixed; inset:0; background:rgba(0,0,0,.5); display:flex; align-items:center; justify-content:center; padding:18px; z-index:1000}
    .modal-backdrop[hidden]{display:none}
    .modal{background:#fff; width:100%; max-width:900px; border-radius:16px; padding:18px; box-shadow:var(--shadow)}
    .modal header{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px}
    .modal h2{margin:0; font-family:"Playfair Display",serif; font-size:26px}
    .modal .modal-close{border:0; background:#f3f4f6; width:36px; height:36px; border-radius:8px; cursor:pointer; font-size:18px}
    .modal .embed iframe{height:min(80dvh, 720px); width:100%}
    body.no-scroll{overflow:hidden}
    /* Sticky CTA (mobile-only) */
    .sticky-cta{position:fixed; left:0; right:0; bottom:0; z-index:1100; padding: max(12px, env(safe-area-inset-bottom) + 12px) 16px; background: linear-gradient(to top, rgba(255,255,255,.98), rgba(255,255,255,.8)); border-top:1px solid #e5e7eb; box-shadow:0 -10px 24px rgba(17,24,39,.12); display:none; height: var(--sticky-height)}
    .sticky-cta button{background:var(--brand); color:#fff; border:0; border-radius:999px; padding:16px 26px; font-weight:900; font-size:18px; box-shadow:0 12px 24px rgba(17,24,39,.18); cursor:pointer; animation:pulse-cta 2s ease-in-out infinite}
    .sticky-cta button:focus{outline:3px solid var(--ring)}
    @media (max-width:768px){ .sticky-cta{display:flex; justify-content:center} .canva-overlay-cta{display:none} }
    @media (max-width:850px){
      .hero{grid-template-columns:1fr; padding:22px}
      .title{font-size:34px}
    }
    
  </style>
</head>
<body>
  <div class="wrap">
    <section class="section" id="intro-canva">
      <div class="canva-stage">
        <button type="button" class="canva-overlay-cta" data-open-rsvp="true" aria-label="Apri modulo conferma">Conferma presenza</button>
        <div class="canva-frame" aria-label="Invito">
          <img class="poster" src="battesimo-it.jpeg" alt="Invito Battesimo" />
          <iframe
            class="canva-embed"
            loading="lazy"
            src="https://www.canva.com/design/DAGvhIH5vuM/W1bfngT3_tYdlC6aASELGg/watch?embed"
            allowfullscreen
            title="Invito Battesimo (Canva)"
          ></iframe>
          <p class="address"><a href="https://www.google.com/maps/place/Santuario+Santa+Maria+a+Mare/@40.6500664,14.6412516,17z/data=!3m1!4b1!4m6!3m5!1s0x133b9544093c35a3:0x35b98a06ca815918!8m2!3d40.6500664!4d14.6412516!16s%2Fg%2F1tdjfd25?hl=it-IT&entry=ttu&g_ep=EgoyMDI1MDgwNi4wIKXMDSoASAFQAw%3D%3D" target="_blank" rel="noopener" aria-label="Apri indicazioni su Google Maps">Dove si trova</a></p>
        </div>
      </div>
      
    </section>

    

    <!-- RSVP Modal -->
    <div class="modal-backdrop" id="rsvp-modal" hidden>
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="rsvp-title">
        <header>
          <h2 id="rsvp-title">Conferma presenza</h2>
          <button class="modal-close" type="button" aria-label="Close">×</button>
        </header>
        <div class="embed">
          <iframe
            src="https://docs.google.com/forms/d/e/1FAIpQLSexRzDrXOJQpXmosN0S7O3lNGjcfKvTaAUerJ2CIlQhdL1Y7A/viewform?embedded=true"
            allowfullscreen
            loading="lazy"
            title="Baptism RSVP">
          </iframe>
        </div>
      </div>
    </div>

    
  </div>
  <div class="sticky-cta">
    <button type="button" data-open-rsvp="true" aria-label="Apri modulo conferma">Conferma presenza</button>
  </div>
  <script>
    (function(){
      const modal = document.getElementById('rsvp-modal');
      const closeBtn = modal ? modal.querySelector('.modal-close') : null;
      const onEsc = (e) => { if (e.key === 'Escape') { modal.setAttribute('hidden',''); document.removeEventListener('keydown', onEsc); } };
      function closeModal(){ modal.setAttribute('hidden',''); document.removeEventListener('keydown', onEsc); document.body.classList.remove('no-scroll'); }
      function openModal(e){ e.preventDefault(); modal.removeAttribute('hidden'); document.addEventListener('keydown', onEsc); document.body.classList.add('no-scroll'); }
      document.querySelectorAll('[data-open-rsvp]')?.forEach(btn => btn.addEventListener('click', openModal));
      closeBtn && closeBtn.addEventListener('click', closeModal);
      modal && modal.addEventListener('click', function(e){ if (e.target === modal) closeModal(); });
      // Fail-safe: su load/resize/orient change assicura che non resti bloccato lo scroll
      function unlock(){ document.body.classList.remove('no-scroll'); modal && modal.setAttribute('hidden',''); }
      window.addEventListener('orientationchange', unlock);
      window.addEventListener('resize', unlock);
      document.addEventListener('DOMContentLoaded', unlock);

      // No loop, play once (default). Nothing else needed.
      // Force a one-time cache-busted load to avoid stale embeds on mobile
      try {
        const params = new URLSearchParams(window.location.search);
        if (!params.has('v')) {
          params.set('v', '3');
          const url = window.location.pathname + '?' + params.toString() + window.location.hash;
          window.location.replace(url);
          return;
        }
        // Toggle Canva embed only when ?embed=1 is present
        const doEmbed = params.get('embed') === '1';
        const frame = document.querySelector('.canva-frame');
        if (frame) {
          if (doEmbed) frame.classList.add('is-embed');
          else frame.classList.remove('is-embed');
        }
      } catch(e) {}

      // No video: showing static image only
    })();
  </script>
</body>
</html>
